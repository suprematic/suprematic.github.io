<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>otplike.supervisor documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Otplike</span> <span class="project-version">0.4.0-alpha-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>otplike</span></div></div></li><li class="depth-2 branch"><a href="otplike.gen-server.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>gen-server</span></div></a></li><li class="depth-2 branch"><a href="otplike.proc-util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>proc-util</span></div></a></li><li class="depth-2 branch"><a href="otplike.process.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>process</span></div></a></li><li class="depth-2 branch current"><a href="otplike.supervisor.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>supervisor</span></div></a></li><li class="depth-2 branch"><a href="otplike.timer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>timer</span></div></a></li><li class="depth-2"><a href="otplike.trace.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>trace</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="otplike.supervisor.html#var-check-child-specs"><div class="inner"><span>check-child-specs</span></div></a></li><li class="depth-1"><a href="otplike.supervisor.html#var-delete-child.21"><div class="inner"><span>delete-child!</span></div></a></li><li class="depth-1"><a href="otplike.supervisor.html#var-restart-child.21"><div class="inner"><span>restart-child!</span></div></a></li><li class="depth-1"><a href="otplike.supervisor.html#var-start-child.21"><div class="inner"><span>start-child!</span></div></a></li><li class="depth-1"><a href="otplike.supervisor.html#var-start-link"><div class="inner"><span>start-link</span></div></a></li><li class="depth-1"><a href="otplike.supervisor.html#var-start-link.21"><div class="inner"><span>start-link!</span></div></a></li><li class="depth-1"><a href="otplike.supervisor.html#var-terminate-child.21"><div class="inner"><span>terminate-child!</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">otplike.supervisor</h1><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var-check-child-specs"><h3>check-child-specs</h3><div class="usage"><code>(check-child-specs spec)</code></div><div class="doc"><div class="markdown"><p>Takes a list of child specification and returns <code>:ok</code> if all of them are syntactically correct, otherwise <code>[error, reason]</code>.</p></div></div><div class="src-link"><a href="https://github.com/suprematic/otplike/blob/0.4.0-alpha-SNAPSHOT/src/otplike/supervisor.clj#L786">view source</a></div></div><div class="public anchor" id="var-delete-child.21"><h3>delete-child!</h3><h4 class="type">macro</h4><div class="usage"><code>(delete-child! sup id)</code></div><div class="doc"><div class="markdown"><p>Tells supervisor to delete the child specification identified by <code>id</code>. The corresponding child process must not be running. Use <code>terminate-child</code> to terminate it.</p>
<p>If successful, the function returns <code>:ok</code>. If the child specification identified by <code>id</code> exists but the corresponding child process is running or is about to be restarted, the function returns <code>[:error :running]</code> or <code>[:error :restarting]</code>, respectively. If the child specification identified by <code>id</code> does not exist, the function returns <code>[:error :not-found]</code>.</p></div></div><div class="src-link"><a href="https://github.com/suprematic/otplike/blob/0.4.0-alpha-SNAPSHOT/src/otplike/supervisor.clj#L890">view source</a></div></div><div class="public anchor" id="var-restart-child.21"><h3>restart-child!</h3><h4 class="type">macro</h4><div class="usage"><code>(restart-child! sup id)</code></div><div class="doc"><div class="markdown"><p>Tells supervisor to restart a child process corresponding to the child specification identified by <code>id</code>. The child specification must exist, and the corresponding child process must not be running.</p>
<p>Notice that for temporary children, the child specification is automatically deleted when the child terminates; thus, it is not possible to restart such children.</p>
<p>If the child specification identified by <code>id</code> does not exist, the function returns <code>[:error :not-found]</code>. If the child specification exists but the corresponding process is already running, the function returns <code>[:error :running]</code>.</p>
<p>If the child process start function returns <code>[:ok pid]</code>, the <code>pid</code> is added to the supervisor and the function returns the same value.</p>
<p>If the child process start function returns an error tuple or an erroneous value, or if it fails, the function returns <code>[:error error]</code>, where <code>error</code> is a form containing information about the error.</p></div></div><div class="src-link"><a href="https://github.com/suprematic/otplike/blob/0.4.0-alpha-SNAPSHOT/src/otplike/supervisor.clj#L836">view source</a></div></div><div class="public anchor" id="var-start-child.21"><h3>start-child!</h3><h4 class="type">macro</h4><div class="usage"><code>(start-child! sup child-spec)</code></div><div class="doc"><div class="markdown"><p>Dynamically adds a child specification to supervisor <code>sup</code>, which starts the corresponding child process.</p>
<p><code>sup</code> can be a pid or a registered name.</p>
<p><code>child-spec</code> must be a valid child specification. The child process is started by using the start function as defined in the child specification.</p>
<p>If there already exists a child specification with the specified identifier, <code>child-spec</code> is discarded, and the function returns <code>[:error :already-present]</code> or <code>[:error [:already-started child]]</code>, depending on if the corresponding child process is running or not.</p>
<p>If the child process start function returns <code>[:ok child-pid]</code>, the child specification and pid are added to the supervisor and the function returns the same value.</p>
<p>If the child process start function returns an error tuple or an erroneous value, or if it fails, the child specification is discarded, and the function returns <code>[:error error]</code>, where <code>error</code> is a form containing information about the error and child specification.</p></div></div><div class="src-link"><a href="https://github.com/suprematic/otplike/blob/0.4.0-alpha-SNAPSHOT/src/otplike/supervisor.clj#L805">view source</a></div></div><div class="public anchor" id="var-start-link"><h3>start-link</h3><div class="usage"><code>(start-link sup-fn)</code><code>(start-link sup-fn args)</code><code>(start-link sup-name sup-fn args)</code></div><div class="doc"><div class="markdown"><p>The same as <code>start-link!</code> but returns async value.</p></div></div><div class="src-link"><a href="https://github.com/suprematic/otplike/blob/0.4.0-alpha-SNAPSHOT/src/otplike/supervisor.clj#L724">view source</a></div></div><div class="public anchor" id="var-start-link.21"><h3>start-link!</h3><h4 class="type">macro</h4><div class="usage"><code>(start-link! sup-fn)</code><code>(start-link! sup-fn args)</code><code>(start-link! sup-name sup-fn args)</code></div><div class="doc"><div class="markdown"><p>Creates a supervisor process as part of a supervision tree. For example, the function ensures that the supervisor is linked to the calling process (its supervisor).</p>
<p>The created supervisor process calls <code>sup-fn</code> to find out about restart strategy, maximum restart intensity, and child processes. To ensure a synchronized startup procedure, <code>start_link!</code> does not return until <code>sup-fn</code> has returned and all child processes have been started.</p>
<p>If <code>sup-name</code> is provided, the supervisor is registered locally as <code>sup-name</code>.</p>
<p><code>args</code> is a vector of the arguments to <code>sup-fn</code>.</p>
<p>If the supervisor and its child processes are successfully created (that is, if all child process start functions return <code>[ok, child-pid]</code>), the function returns <code>[ok, pid]</code>, where <code>pid</code> is the pid of the supervisor.</p>
<p>If there already exists a process with the specified <code>sup-name</code>, the function retunrs <code>[:error reason]</code>.</p>
<p>If <code>sup-fn</code> fails or returns an incorrect value, this function returns <code>[:error ([:bad-return-value 'init ret] :as reason)]</code> , where <code>ret</code> is the returned value, and the supervisor terminates with the same reason.</p>
<p>If any child process start function fails or returns an error tuple or an erroneous value, the supervisor first terminates all already started child processes with reason <code>:shutdown</code> and then terminate itself and returns <code>[:error, [:shutdown reason]]</code>.</p></div></div><div class="src-link"><a href="https://github.com/suprematic/otplike/blob/0.4.0-alpha-SNAPSHOT/src/otplike/supervisor.clj#L742">view source</a></div></div><div class="public anchor" id="var-terminate-child.21"><h3>terminate-child!</h3><h4 class="type">macro</h4><div class="usage"><code>(terminate-child! sup id)</code></div><div class="doc"><div class="markdown"><p>Tells supervisor to terminate the specified child.</p>
<p><code>id</code> must be the child specification identifier. The process, if any, is terminated and, unless it is a temporary child, the child specification is kept by the supervisor. The child process can later be restarted by the supervisor. The child process can also be restarted explicitly by calling <code>restart-child</code>. Use <code>delete-child</code> to remove the child specification.</p>
<p>If the child is temporary, the child specification is deleted as soon as the process terminates. This means that <code>delete-child</code> has no meaning and <code>restart-child</code> cannot be used for these children.</p>
<p>If successful, the function returns <code>:ok</code>. If there is no child specification with the specified <code>id</code>, the function returns <code>[:error :not-found]</code>.</p></div></div><div class="src-link"><a href="https://github.com/suprematic/otplike/blob/0.4.0-alpha-SNAPSHOT/src/otplike/supervisor.clj#L865">view source</a></div></div></div></body></html>